<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <div data-th-replace="/fragments/header.html :: fragment-header"></div>
</head>
<body style="overflow-x: hidden">
  <div data-th-replace="/fragments/nav.html :: fragment-nav"></div>




  <main id="productList">
    <img class="banner" src="http://localhost:3333/onemoa/img/productbg.png" alt="">
    <div id="underBanner">
      <p id="">전체카테고리
        <span>최신순</span>
        <span>인기순</span>
        <span>평점순</span>
      </p>
    </div>

    <nav>
      <ul>
        <li class="menu" data-th-each= "category : ${productCategories}">
          <p class="cate1" data-th-text="${category.name}">상위 카테고리</p>
          <ul class="hide">
            <!--            <a href="#" data-th-href="@{${child.code}}" data-th-each= "child : ${category.children}" data-th-text="${child.name}">하위 카테고리</a>-->
            <a href="#" data-th-href="@{listf(code=${child.code})}" data-th-each= "child : ${category.children}" data-th-text="${child.name}">하위 카테고리</a>
            <!--            <a href="listf?no=010010"  data-th-each= "child : ${category.children}" data-th-text="${child.name}">하위 카테고리</a>-->
          </ul>
        </li>
      </ul>
    </nav>

    <section id="product">
      <div class="product_container">
        <a href="#" data-th-href="@{detail(no=${product.no})}" class="item" data-th-each= "product : ${products}">
          <img src="./img/conthumb.png" alt="">
          <p data-th-text="${product.title}">상품게시물 제목</p>
          <p data-th-text="${#numbers.formatInteger(product.price, 3, 'COMMA')} + ' 원'">판매 상품 가격</p>
        </a>
      </div>
    </section>
    <div id="underBanner"></div>
  </main>

  <footer data-th-replace="/fragments/footer.html :: fragment-footer"></footer>

  <script>
    // TODO 1. JQuery 사용해서 쿠키값안에 email 값 찾아서 login시 email ID 값에 추가.
    // TODO 2. cookie 2번
    console.log($.cookie("email"));
    $("#email").val($.cookie("email"));
  </script>

  <script>
    const body = document.querySelector('body');
    const modal = document.querySelector('.modal');
    const btnOpenPopup = document.querySelector('.btn-open-popup');
    const closebtn = document.querySelector('.closebtn');

    btnOpenPopup.addEventListener('click', () => {
      modal.style.display = 'block';

      if (modal.classList.contains('show')) {
        body.style.overflow = 'hide';
      }
      body.style.overflow = 'hidden';
    });

    closebtn.addEventListener('click', () => {
      modal.style.display = 'none';
      body.style.overflow = 'auto';
    });

    $(document).ready(function(){
      $(".menu>p").click(function(){
        $(this).addClass("selected");
        var submenu = $(this).next("ul");

        // submenu 가 화면상에 보일때는 위로 보드랍게 접고 아니면 아래로 보드랍게 펼치기
        if(submenu.is(":visible") ){
          submenu.slideUp();
          $(this).removeClass("selected");
        }else{
          submenu.slideDown();
        }
      })});

  </script>
</body>
</html>